import pyxel, random
pyxel.init(256,256,title="Fuego Arena",fps=60,)
perso_x=128
perso_y=128
vies=3
projectiles_x=0
projectiles_y=0
projectiles_liste=[]

def perso_deplacement(x,y):
    if pyxel.btn(pyxel.KEY_RIGHT) or pyxel.btn(pyxel.KEY_D):
        if (x < 248) :
            x = x + 1
    if pyxel.btn(pyxel.KEY_LEFT) or pyxel.btn(pyxel.KEY_Q):
        if (x > 0) :
            x = x - 1
    if pyxel.btn(pyxel.KEY_DOWN) or pyxel.btn(pyxel.KEY_S):
        if (y < 248) :
            y = y + 1
    if pyxel.btn(pyxel.KEY_UP) or pyxel.btn(pyxel.KEY_Z):
        if (y > 0) :
            y = y - 1
    return x, y

def projectiles_creationhaut(projectiles_liste):
    if (pyxel.frame_count % 60 == 0):
        projectiles_liste.append([random.randint(0,248),0])
    return projectiles_liste


def projectiles_deplacementhaut(projectiles_liste):
    for p in projectiles_liste:
        p[1] += 1
        if  p[1]>256:
            projectiles_liste.remove(p)
    return projectiles_liste



def update():
    global perso_x, perso_y, projectiles_liste
    perso_x, perso_y = perso_deplacement(perso_x, perso_y)
    projectiles_liste=projectiles_creationhaut(projectiles_liste)
    projectiles_liste = projectiles_deplacementhaut(projectiles_liste)

    
def draw():
    pyxel.cls(0)
    pyxel.rect(perso_x, perso_y, 8, 8, 1)
    for pro in projectiles_liste:
        pyxel.rect(pro[0], pro[1], 8, 8, 8)
    
    
pyxel.run(update, draw)
